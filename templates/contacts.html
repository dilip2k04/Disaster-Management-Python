<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Emergency Response Hub | Disaster Relief Network India</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #0f172a;
            --secondary: #ef4444;
            --accent: #2563eb;
            --success: #16a34a;
            --warning: #f59e0b;
            --danger: #dc2626;
            --light: rgba(255,255,255,0.95);
            --dark: #1e293b;
            --glass: rgba(255,255,255,0.15);
            --glass-dark: rgba(15,23,42,0.85);
            --blur: blur(20px);
            --radius: 24px;
            --radius-lg: 32px;
            --shadow: 0 25px 50px -12px rgba(0,0,0,0.25);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', 'Segoe UI', sans-serif;
        }

        body {
            background: linear-gradient(135deg, #f1f5f9 0%, #e2e8f0 100%);
            color: var(--dark);
            line-height: 1.6;
        }

        /* ===== HEADER ===== */
        .emergency-header {
            background: linear-gradient(145deg, var(--primary), #1e293b);
            color: white;
            padding: 60px 20px 120px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .emergency-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at 20% 50%, rgba(239,68,68,0.2) 0%, transparent 50%),
                        radial-gradient(circle at 80% 50%, rgba(37,99,235,0.2) 0%, transparent 50%);
            pointer-events: none;
        }

        .emergency-header h1 {
            font-size: 3rem;
            font-weight: 900;
            letter-spacing: -1px;
            margin-bottom: 1rem;
            text-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }

        .emergency-header p {
            font-size: 1.2rem;
            opacity: 0.95;
            max-width: 700px;
            margin: 0 auto;
        }

        /* Header curved bottom */
        .emergency-header::after {
            content: "";
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 80px;
            background: linear-gradient(135deg, #f1f5f9 0%, #e2e8f0 100%);
            clip-path: polygon(0 100%, 100% 40%, 100% 100%, 0 100%);
        }

        /* ===== CONTAINER ===== */
        .container {
            max-width: 1400px;
            margin: -60px auto 0;
            padding: 0 20px 40px;
            position: relative;
            z-index: 10;
        }

        /* ===== EMERGENCY ALERT BAR ===== */
        .global-alert-bar {
            background: linear-gradient(145deg, var(--secondary), #dc2626);
            color: white;
            padding: 18px 25px;
            border-radius: 100px;
            margin-bottom: 30px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 15px;
            box-shadow: 0 15px 35px rgba(220,38,38,0.3);
            animation: pulseGlow 2s infinite;
        }

        @keyframes pulseGlow {
            0%, 100% { box-shadow: 0 15px 35px rgba(220,38,38,0.3); }
            50% { box-shadow: 0 20px 45px rgba(220,38,38,0.5); }
        }

        .global-alert-bar i {
            font-size: 1.5rem;
            margin-right: 10px;
        }

        .emergency-number-large {
            background: white;
            color: var(--secondary);
            padding: 8px 25px;
            border-radius: 100px;
            font-weight: 900;
            font-size: 1.8rem;
            text-decoration: none;
        }

        /* ===== FEATURE GRID ===== */
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }

        .feature-card {
            background: white;
            border-radius: var(--radius);
            padding: 25px;
            box-shadow: var(--shadow);
            transition: all 0.3s ease;
            border: 1px solid rgba(255,255,255,0.2);
            backdrop-filter: var(--blur);
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 30px 60px -15px rgba(0,0,0,0.3);
        }

        .feature-icon {
            width: 70px;
            height: 70px;
            background: linear-gradient(145deg, var(--accent), #1e40af);
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            color: white;
        }

        .feature-content {
            flex: 1;
        }

        .feature-content h3 {
            font-size: 1.2rem;
            margin-bottom: 5px;
            color: var(--primary);
        }

        .feature-content p {
            color: #64748b;
            font-size: 0.9rem;
            margin-bottom: 10px;
        }

        .feature-link {
            color: var(--accent);
            font-weight: 600;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        /* ===== SEARCH & FILTER SECTION ===== */
        .emergency-search-card {
            background: white;
            border-radius: var(--radius-lg);
            padding: 30px;
            box-shadow: var(--shadow);
            margin-bottom: 40px;
        }

        .search-container {
            display: flex;
            gap: 15px;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .search-input-wrapper {
            flex: 1;
            position: relative;
        }

        .search-input-wrapper i {
            position: absolute;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            color: #94a3b8;
        }

        #location-search {
            width: 100%;
            padding: 15px 20px 15px 50px;
            border-radius: 100px;
            border: 2px solid #e2e8f0;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        #location-search:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 4px rgba(37,99,235,0.1);
        }

        .search-btn {
            background: var(--accent);
            color: white;
            border: none;
            padding: 0 35px;
            border-radius: 100px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .search-btn:hover {
            background: #1e40af;
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(37,99,235,0.3);
        }

        .filter-section {
            margin-top: 25px;
        }

        .filter-title {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .filter-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .filter-tag {
            background: #f1f5f9;
            padding: 10px 20px;
            border-radius: 100px;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid transparent;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .filter-tag.active {
            background: var(--accent);
            color: white;
            box-shadow: 0 8px 15px rgba(37,99,235,0.2);
        }

        .filter-tag:hover {
            background: var(--accent);
            color: white;
        }

        /* ===== QUICK DIAL PANEL ===== */
        .quick-dial-section {
            margin-bottom: 50px;
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }

        .section-header h2 {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--primary);
        }

        .emergency-badge {
            background: var(--secondary);
            color: white;
            padding: 8px 20px;
            border-radius: 100px;
            font-weight: 600;
            animation: pulse 2s infinite;
        }

        .quick-dial-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
        }

        .quick-dial-card {
            background: white;
            border-radius: var(--radius);
            padding: 25px;
            box-shadow: var(--shadow);
            transition: all 0.3s ease;
            border-left: 8px solid var(--accent);
            position: relative;
            overflow: hidden;
        }

        .quick-dial-card::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 100px;
            height: 100px;
            background: linear-gradient(145deg, rgba(37,99,235,0.1), rgba(59,130,246,0.05));
            border-radius: 50%;
            transform: translate(30px, -30px);
        }

        .quick-dial-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 30px 60px -15px rgba(0,0,0,0.2);
        }

        .quick-dial-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 15px;
        }

        .quick-dial-header h3 {
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--primary);
        }

        .service-badge {
            padding: 5px 12px;
            border-radius: 100px;
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
        }

        .service-badge.medical { background: #fee2e2; color: #dc2626; }
        .service-badge.rescue { background: #fff3cd; color: #f59e0b; }
        .service-badge.shelter { background: #e0f2fe; color: #0891b2; }
        .service-badge.govt { background: #e0e7ff; color: #4f46e5; }
        .service-badge.utility { background: #dcfce7; color: #16a34a; }

        .phone-number-large {
            font-size: 2rem;
            font-weight: 900;
            color: var(--dark);
            margin: 15px 0;
            letter-spacing: 1px;
        }

        .call-actions {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .call-btn {
            flex: 1;
            background: var(--success);
            color: white;
            padding: 12px;
            border-radius: 12px;
            font-weight: 700;
            text-decoration: none;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            transition: all 0.3s ease;
        }

        .call-btn:hover {
            background: #15803d;
            transform: translateY(-2px);
        }

        .save-btn {
            width: 50px;
            height: 50px;
            background: #f1f5f9;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--dark);
            transition: all 0.3s ease;
        }

        .save-btn:hover {
            background: var(--accent);
            color: white;
        }

        /* ===== LIVE ALERT TICKER ===== */
        .live-alert-ticker {
            background: white;
            border-radius: var(--radius);
            padding: 20px;
            margin-bottom: 40px;
            border: 1px solid #e2e8f0;
        }

        .ticker-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        .live-badge {
            background: var(--secondary);
            color: white;
            padding: 6px 15px;
            border-radius: 100px;
            font-size: 0.85rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .ticker-container {
            max-height: 300px;
            overflow-y: auto;
            padding-right: 10px;
        }

        .alert-item {
            background: #f8fafc;
            border-left: 4px solid var(--secondary);
            padding: 15px 20px;
            margin-bottom: 10px;
            border-radius: 12px;
            transition: all 0.3s ease;
        }

        .alert-item:hover {
            background: white;
            box-shadow: var(--shadow);
        }

        .alert-location {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
        }

        .alert-location strong {
            color: var(--primary);
        }

        .alert-time {
            color: #64748b;
            font-size: 0.85rem;
        }

        /* ===== COMPREHENSIVE CONTACTS TABLE ===== */
        .contacts-accordion {
            background: white;
            border-radius: var(--radius-lg);
            padding: 30px;
            box-shadow: var(--shadow);
            margin-bottom: 40px;
        }

        .category-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 25px;
            flex-wrap: wrap;
            border-bottom: 2px solid #e2e8f0;
            padding-bottom: 15px;
        }

        .category-tab {
            padding: 12px 25px;
            border-radius: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .category-tab.active {
            background: var(--accent);
            color: white;
        }

        .category-tab:hover:not(.active) {
            background: #f1f5f9;
        }

        .contacts-table {
            width: 100%;
            border-collapse: collapse;
        }

        .contacts-table th {
            background: #f8fafc;
            padding: 15px;
            text-align: left;
            color: var(--primary);
            font-weight: 700;
        }

        .contacts-table td {
            padding: 15px;
            border-bottom: 1px solid #e2e8f0;
        }

        .contacts-table tr:hover td {
            background: #f8fafc;
        }

        .contact-type-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 100px;
            font-size: 0.75rem;
            font-weight: 700;
        }

        /* ===== OFFLINE TOOLS SECTION ===== */
        .offline-tools {
            background: linear-gradient(145deg, var(--primary), #1e293b);
            border-radius: var(--radius-lg);
            padding: 40px;
            color: white;
            margin-bottom: 40px;
        }

        .offline-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 25px;
            margin-top: 30px;
        }

        .offline-card {
            background: rgba(255,255,255,0.1);
            backdrop-filter: var(--blur);
            border-radius: var(--radius);
            padding: 25px;
            text-align: center;
            transition: all 0.3s ease;
        }

        .offline-card:hover {
            background: rgba(255,255,255,0.15);
            transform: translateY(-5px);
        }

        .offline-card i {
            font-size: 2.5rem;
            margin-bottom: 15px;
            color: var(--secondary);
        }

        .offline-btn {
            display: inline-block;
            background: white;
            color: var(--primary);
            padding: 10px 25px;
            border-radius: 100px;
            text-decoration: none;
            font-weight: 700;
            margin-top: 15px;
            transition: all 0.3s ease;
        }

        .offline-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        }

        /* ===== RESPONSIVE ===== */
        @media (max-width: 1024px) {
            .emergency-header h1 { font-size: 2.5rem; }
        }

        @media (max-width: 768px) {
            .emergency-header h1 { font-size: 2rem; }
            .search-container { flex-direction: column; }
            .search-btn { padding: 15px; }
            .phone-number-large { font-size: 1.5rem; }
        }

        @media (max-width: 480px) {
            .emergency-header h1 { font-size: 1.8rem; }
            .container { padding: 0 15px; }
            .quick-dial-grid { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <div class="emergency-header">
        <div class="container">
            <h1><i class="fas fa-shield-halved"></i> Emergency Response Hub</h1>
            <p>India's Unified Command Center for Disaster Relief & Emergency Services</p>
        </div>
    </div>

    <!-- Global Emergency Alert Bar -->
    <div class="container">
        <div class="global-alert-bar">
            <div style="display: flex; align-items: center;">
                <i class="fas fa-triangle-exclamation"></i>
                <span style="font-weight: 700;">LIFE-THREATENING EMERGENCY?</span>
            </div>
            <div style="display: flex; align-items: center; gap: 15px;">
                <span style="font-size: 1.1rem;">DIAL</span>
                <a href="tel:112" class="emergency-number-large">112</a>
                <span style="font-size: 0.9rem;">(All-in-one)</span>
            </div>
        </div>

        <!-- Feature Grid -->
        <div class="feature-grid">
            <div class="feature-card">
                <div class="feature-icon">
                    <i class="fas fa-location-dot"></i>
                </div>
                <div class="feature-content">
                    <h3>Find Nearest Hospital</h3>
                    <p>Real-time availability of beds, ambulances & emergency care</p>
                    <a href="#" class="feature-link">Locate Now <i class="fas fa-arrow-right"></i></a>
                </div>
            </div>
            <div class="feature-card">
                <div class="feature-icon">
                    <i class="fas fa-people-arrows"></i>
                </div>
                <div class="feature-content">
                    <h3>Request Rescue</h3>
                    <p>Send instant SOS with your GPS location to nearest responders</p>
                    <a href="#" class="feature-link">Activate SOS <i class="fas fa-arrow-right"></i></a>
                </div>
            </div>
            <div class="feature-card">
                <div class="feature-icon">
                    <i class="fas fa-house-circle-exclamation"></i>
                </div>
                <div class="feature-content">
                    <h3>Find Shelters</h3>
                    <p>Locate nearest relief camps, shelters & distribution centers</p>
                    <a href="#" class="feature-link">View Map <i class="fas fa-arrow-right"></i></a>
                </div>
            </div>
        </div>

        <!-- Search & Filter Card -->
        <div class="emergency-search-card">
            <h2 style="margin-bottom: 10px; color: var(--primary);">
                <i class="fas fa-magnifying-glass" style="color: var(--accent); margin-right: 10px;"></i>
                Find Emergency Services Near You
            </h2>
            <p style="color: #64748b; margin-bottom: 20px;">Get location-specific emergency contacts and resources</p>
            
            <div class="search-container">
                <div class="search-input-wrapper">
                    <i class="fas fa-location-dot"></i>
                    <input type="text" id="location-search" placeholder="Enter your city, district, or state (e.g., Chennai, Tamil Nadu)">
                </div>
                <button class="search-btn">
                    <i class="fas fa-search"></i>
                    Search
                </button>
                <button class="search-btn" style="background: var(--secondary);" id="use-my-location">
                    <i class="fas fa-location-arrow"></i>
                    Use My Location
                </button>
            </div>

            <div class="filter-section">
                <div class="filter-title">
                    <span style="font-weight: 700;">Filter by service type:</span>
                    <span style="color: var(--accent); cursor: pointer;" id="clear-filters">Clear all</span>
                </div>
                <div class="filter-tags">
                    <div class="filter-tag active" data-type="all">All Services</div>
                    <div class="filter-tag active" data-type="medical"><i class="fas fa-hospital"></i> Medical</div>
                    <div class="filter-tag active" data-type="rescue"><i class="fas fa-truck"></i> Rescue</div>
                    <div class="filter-tag active" data-type="shelter"><i class="fas fa-house"></i> Shelter</div>
                    <div class="filter-tag active" data-type="utility"><i class="fas fa-bolt"></i> Utilities</div>
                    <div class="filter-tag active" data-type="govt"><i class="fas fa-building"></i> Government</div>
                </div>
            </div>
        </div>

        <!-- Quick Dial Section -->
        <div class="quick-dial-section">
            <div class="section-header">
                <div>
                    <h2><i class="fas fa-phone" style="color: var(--secondary); margin-right: 10px;"></i> Quick Dial Emergency</h2>
                    <p style="color: #64748b;">One-tap access to life-saving services</p>
                </div>
                <span class="emergency-badge">
                    <i class="fas fa-bolt"></i> 24/7 ACTIVE
                </span>
            </div>

            <div class="quick-dial-grid" id="quick-dial-container">
                <!-- Populated by JavaScript -->
            </div>
        </div>

        <!-- Live Alert Ticker -->
        <div class="live-alert-ticker">
            <div class="ticker-header">
                <div class="live-badge">
                    <span class="pulse-dot"></span>
                    <span>LIVE UPDATES</span>
                </div>
                <div style="display: flex; gap: 10px; margin-left: auto;">
                    <select id="state-filter" style="padding: 8px 15px; border-radius: 8px; border: 1px solid #e2e8f0;">
                        <option value="all">All States</option>
                        <option value="Tamil Nadu">Tamil Nadu</option>
                        <option value="Kerala">Kerala</option>
                        <option value="Maharashtra">Maharashtra</option>
                        <option value="Delhi">Delhi</option>
                        <option value="Karnataka">Karnataka</option>
                    </select>
                    <button class="search-btn" style="padding: 8px 20px;" id="refresh-alerts">
                        <i class="fas fa-rotate"></i>
                    </button>
                </div>
            </div>
            <div class="ticker-container" id="live-alert-container">
                <!-- Live alerts will appear here -->
            </div>
        </div>

        <!-- Comprehensive Contacts Accordion -->
        <div class="contacts-accordion">
            <h2 style="margin-bottom: 20px; color: var(--primary);">
                <i class="fas fa-address-book" style="color: var(--accent); margin-right: 10px;"></i>
                Complete Emergency Directory
            </h2>
            
            <div class="category-tabs" id="category-tabs">
                <div class="category-tab active" data-category="all">All Contacts</div>
                <div class="category-tab" data-category="medical">Medical</div>
                <div class="category-tab" data-category="rescue">Rescue & Fire</div>
                <div class="category-tab" data-category="shelter">Shelter & Relief</div>
                <div class="category-tab" data-category="utility">Utilities</div>
                <div class="category-tab" data-category="govt">Government</div>
            </div>

            <div class="table-responsive">
                <table class="contacts-table" id="contacts-table">
                    <thead>
                        <tr>
                            <th>Service</th>
                            <th>Contact Number</th>
                            <th>Type</th>
                            <th>Availability</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody id="contacts-table-body">
                        <!-- Populated by JavaScript -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Offline Tools Section -->
        <div class="offline-tools">
            <h2 style="font-size: 1.8rem; margin-bottom: 10px;">
                <i class="fas fa-download" style="margin-right: 15px;"></i>
                Prepare for Connectivity Loss
            </h2>
            <p style="opacity: 0.9; font-size: 1.1rem; max-width: 700px;">
                Download emergency contacts and resources for offline access when networks are down.
            </p>

            <div class="offline-grid">
                <div class="offline-card">
                    <i class="fas fa-file-pdf"></i>
                    <h3 style="margin-bottom: 10px;">Emergency PDF</h3>
                    <p style="opacity: 0.9; margin-bottom: 15px;">Complete contact directory, maps & procedures</p>
                    <button class="offline-btn" id="download-pdf">
                        <i class="fas fa-download"></i> Download (2.4 MB)
                    </button>
                </div>
                <div class="offline-card">
                    <i class="fas fa-address-card"></i>
                    <h3 style="margin-bottom: 10px;">vCard Contacts</h3>
                    <p style="opacity: 0.9; margin-bottom: 15px;">Save all emergency numbers to your phone</p>
                    <button class="offline-btn" id="download-vcf">
                        <i class="fas fa-download"></i> Save to Contacts
                    </button>
                </div>
                <div class="offline-card">
                    <i class="fas fa-image"></i>
                    <h3 style="margin-bottom: 10px;">Emergency Card</h3>
                    <p style="opacity: 0.9; margin-bottom: 15px;">Printable wallet-sized emergency contact card</p>
                    <button class="offline-btn" id="download-image">
                        <i class="fas fa-download"></i> Generate Card
                    </button>
                </div>
                <div class="offline-card">
                    <i class="fas fa-sms"></i>
                    <h3 style="margin-bottom: 10px;">SMS to Phone</h3>
                    <p style="opacity: 0.9; margin-bottom: 15px;">Text emergency contacts to your number</p>
                    <div style="display: flex; gap: 10px;">
                        <input type="tel" id="user-phone" placeholder="+91 XXXXX XXXXX" style="flex: 1; padding: 10px; border-radius: 8px; border: none;">
                        <button class="offline-btn" id="send-sms" style="margin-top: 0;">Send</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Comprehensive Emergency Contacts Database
        const emergencyDatabase = {
            national: [
                { service: "National Emergency Number", number: "112", type: "govt", availability: "24/7", description: "Single emergency number (Police/Fire/Ambulance)" },
                { service: "Police", number: "100", type: "govt", availability: "24/7", description: "Police control room" },
                { service: "Fire Services", number: "101", type: "rescue", availability: "24/7", description: "Fire brigade" },
                { service: "Ambulance / EMS", number: "102 / 108", type: "medical", availability: "24/7", description: "Emergency medical services" },
                { service: "Women Helpline", number: "1091", type: "govt", availability: "24/7", description: "Women in distress" },
                { service: "Child Helpline", number: "1098", type: "govt", availability: "24/7", description: "Children in need" },
                { service: "Disaster Management", number: "1070 / 1078", type: "govt", availability: "24/7", description: "National disaster response" },
                { service: "Poison Control", number: "1066", type: "medical", availability: "24/7", description: "Poison information center" },
                { service: "Mental Health Helpline", number: "1800-599-0019", type: "medical", availability: "24/7", description: "Psychological support" },
                { service: "Blood Bank", number: "104", type: "medical", availability: "24/7", description: "Blood requirement helpline" }
            ],
            stateSpecific: {
                "Tamil Nadu": [
                    { service: "TN Disaster Management", number: "1070 / 1077", type: "govt", availability: "24/7", description: "State disaster control" },
                    { service: "Chennai Flood Control", number: "1916", type: "govt", availability: "24/7", description: "Flood emergency" },
                    { service: "TN Police Control", number: "100", type: "govt", availability: "24/7", description: "State police HQ" }
                ],
                "Kerala": [
                    { service: "Kerala Disaster Management", number: "1077 / 0471-1234567", type: "govt", availability: "24/7", description: "State disaster control" },
                    { service: "Kerala Flood Relief", number: "1070", type: "govt", availability: "24/7", description: "Flood emergency" }
                ],
                "Maharashtra": [
                    { service: "Maharashtra Disaster Management", number: "1800-233-4444", type: "govt", availability: "24/7", description: "State disaster control" },
                    { service: "Mumbai Fire Brigade", number: "101", type: "rescue", availability: "24/7", description: "Mumbai fire services" }
                ]
            }
        };

        // Quick Dial Contacts (Top 6 most critical)
        const quickDialContacts = [
            { name: "National Emergency", number: "112", type: "govt", description: "Police â€¢ Fire â€¢ Ambulance" },
            { name: "Ambulance", number: "108", type: "medical", description: "Emergency Medical Services" },
            { name: "Police", number: "100", type: "govt", description: "Law & Order" },
            { name: "Fire Services", number: "101", type: "rescue", description: "Fire Emergencies" },
            { name: "Women Helpline", number: "1091", type: "govt", description: "Women in Distress" },
            { name: "Disaster Management", number: "1070", type: "govt", description: "National Disaster Response" }
        ];

        // Live Alerts Database
        let liveAlerts = [
            { state: "Tamil Nadu", city: "Chennai", message: "Heavy rainfall alert: NDRF teams deployed in low-lying areas. Evacuation underway in Velachery, Madipakkam.", severity: "high", timestamp: "10:15 AM" },
            { state: "Tamil Nadu", city: "Coimbatore", message: "Noyyal river water level rising. Relief camps opened at 5 locations. Residents near riverbanks advised to evacuate.", severity: "high", timestamp: "10:20 AM" },
            { state: "Kerala", city: "Idukki", message: "Landslide risk in hilly regions. District administration issued red alert. Tourist travel restricted.", severity: "medium", timestamp: "10:25 AM" },
            { state: "Maharashtra", city: "Mumbai", message: "Local train services disrupted on Harbour line due to waterlogging at Kurla. Alternate bus services arranged.", severity: "medium", timestamp: "10:30 AM" },
            { state: "Tamil Nadu", city: "Madurai", message: "Cyclone advisory: Heavy winds (60-70 kmph) expected along coastal areas. Fishing boats advised to return.", severity: "high", timestamp: "10:35 AM" },
            { state: "Delhi", city: "New Delhi", message: "Heat wave conditions: Temperature to touch 44Â°C. Cooling centers opened at all district offices.", severity: "low", timestamp: "10:40 AM" }
        ];

        // State color mapping
        const stateColors = {
            "Tamil Nadu": "#2563eb",
            "Kerala": "#16a34a",
            "Maharashtra": "#9333ea",
            "Delhi": "#dc2626",
            "Karnataka": "#ea580c"
        };

        // ===== RENDER FUNCTIONS =====
        function renderQuickDial(filterTypes = ['all', 'medical', 'rescue', 'shelter', 'utility', 'govt']) {
            const container = document.getElementById('quick-dial-container');
            container.innerHTML = '';
            
            let contacts = quickDialContacts;
            
            if (!filterTypes.includes('all')) {
                contacts = quickDialContacts.filter(c => filterTypes.includes(c.type));
            }
            
            contacts.forEach(contact => {
                const card = document.createElement('div');
                card.className = 'quick-dial-card';
                card.innerHTML = `
                    <div class="quick-dial-header">
                        <h3>${contact.name}</h3>
                        <span class="service-badge ${contact.type}">${contact.type.toUpperCase()}</span>
                    </div>
                    <p style="color: #64748b;">${contact.description}</p>
                    <div class="phone-number-large">${contact.number}</div>
                    <div class="call-actions">
                        <a href="tel:${contact.number.replace(/[^0-9]/g, '')}" class="call-btn">
                            <i class="fas fa-phone"></i> Call Now
                        </a>
                        <button class="save-btn" onclick="saveContact('${contact.name}', '${contact.number}')">
                            <i class="fas fa-bookmark"></i>
                        </button>
                    </div>
                `;
                container.appendChild(card);
            });
        }

        function renderContactsTable(category = 'all', location = null) {
            const tbody = document.getElementById('contacts-table-body');
            tbody.innerHTML = '';
            
            let contacts = [...emergencyDatabase.national];
            
            // Add state-specific contacts if location is specified
            if (location && emergencyDatabase.stateSpecific[location]) {
                contacts = [...contacts, ...emergencyDatabase.stateSpecific[location]];
            }
            
            // Filter by category
            if (category !== 'all') {
                contacts = contacts.filter(c => c.type === category);
            }
            
            contacts.forEach(contact => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>
                        <strong>${contact.service}</strong>
                        <p style="color: #64748b; font-size: 0.85rem; margin-top: 3px;">${contact.description || ''}</p>
                    </td>
                    <td class="contact-number" style="font-weight: 700; color: var(--accent);">${contact.number}</td>
                    <td><span class="contact-type-badge type-${contact.type}">${contact.type}</span></td>
                    <td>${contact.availability}</td>
                    <td>
                        <a href="tel:${contact.number.replace(/[^0-9]/g, '')}" class="call-btn" style="padding: 8px 15px; font-size: 0.9rem;">
                            <i class="fas fa-phone"></i> Call
                        </a>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        function renderLiveAlerts(stateFilter = 'all') {
            const container = document.getElementById('live-alert-container');
            container.innerHTML = '';
            
            let alerts = stateFilter === 'all' ? liveAlerts : liveAlerts.filter(a => a.state === stateFilter);
            
            alerts.sort((a, b) => new Date('1970/01/01 ' + b.timestamp) - new Date('1970/01/01 ' + a.timestamp));
            
            alerts.forEach(alert => {
                const alertDiv = document.createElement('div');
                alertDiv.className = 'alert-item';
                alertDiv.style.borderLeftColor = alert.severity === 'high' ? '#dc2626' : alert.severity === 'medium' ? '#f59e0b' : '#2563eb';
                
                alertDiv.innerHTML = `
                    <div class="alert-location">
                        <div>
                            <strong style="font-size: 1.1rem;">${alert.city}</strong>
                            <span style="background: ${stateColors[alert.state] || '#64748b'}; color: white; padding: 3px 10px; border-radius: 100px; font-size: 0.75rem; margin-left: 10px;">
                                ${alert.state}
                            </span>
                        </div>
                        <span class="alert-time"><i class="fas fa-clock"></i> ${alert.timestamp}</span>
                    </div>
                    <p style="color: var(--dark); margin-top: 8px;">${alert.message}</p>
                    <div style="margin-top: 10px;">
                        <span style="background: ${alert.severity === 'high' ? '#fee2e2' : alert.severity === 'medium' ? '#fff3cd' : '#e0f2fe'}; 
                                   color: ${alert.severity === 'high' ? '#dc2626' : alert.severity === 'medium' ? '#f59e0b' : '#2563eb'}; 
                                   padding: 4px 12px; border-radius: 100px; font-size: 0.75rem; font-weight: 700;">
                            ${alert.severity.toUpperCase()} PRIORITY
                        </span>
                    </div>
                `;
                container.appendChild(alertDiv);
            });
        }

        // ===== UTILITY FUNCTIONS =====
        function saveContact(name, number) {
            // Create vCard
            const vCard = `BEGIN:VCARD
VERSION:3.0
FN:Emergency - ${name}
TEL:${number}
NOTE:Emergency contact from Disaster Response Hub
END:VCARD`;
            
            const blob = new Blob([vCard], { type: 'text/vcard' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `${name.replace(/\s+/g, '_')}_emergency.vcf`;
            a.click();
            
            alert(`âœ… ${name} saved to contacts!`);
        }

        function simulateLiveUpdate() {
            const states = ["Tamil Nadu", "Kerala", "Maharashtra", "Delhi", "Karnataka"];
            const cities = {
                "Tamil Nadu": ["Chennai", "Coimbatore", "Madurai", "Salem", "Trichy"],
                "Kerala": ["Kochi", "Thiruvananthapuram", "Kozhikode", "Idukki"],
                "Maharashtra": ["Mumbai", "Pune", "Nagpur", "Nashik"],
                "Delhi": ["New Delhi", "North Delhi", "South Delhi", "East Delhi"],
                "Karnataka": ["Bengaluru", "Mysuru", "Mangaluru", "Hubli"]
            };
            
            const messages = [
                "Heavy rainfall warning issued by IMD. Orange alert in effect.",
                "Rescue operations ongoing. NDRF teams deployed.",
                "Relief camps opened at local schools and community halls.",
                "Power restoration work in progress. Expected completion in 2 hours.",
                "Emergency helpline numbers activated. Share with those in need.",
                "Medical camps established at affected areas. Free treatment available.",
                "Evacuation underway. Use designated routes only.",
                "Drinking water distribution points set up at 5 locations."
            ];

            setInterval(() => {
                const randomState = states[Math.floor(Math.random() * states.length)];
                const randomCity = cities[randomState][Math.floor(Math.random() * cities[randomState].length)];
                const randomMessage = messages[Math.floor(Math.random() * messages.length)];
                const severities = ['high', 'medium', 'low'];
                const randomSeverity = severities[Math.floor(Math.random() * severities.length)];
                
                const newAlert = {
                    state: randomState,
                    city: randomCity,
                    message: randomMessage,
                    severity: randomSeverity,
                    timestamp: new Date().toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' })
                };
                
                liveAlerts.unshift(newAlert);
                if (liveAlerts.length > 15) liveAlerts.pop();
                
                const stateFilter = document.getElementById('state-filter').value;
                renderLiveAlerts(stateFilter);
            }, 20000); // Update every 20 seconds
        }

        // ===== EVENT LISTENERS =====
        document.addEventListener('DOMContentLoaded', () => {
            // Initial render
            renderQuickDial();
            renderContactsTable();
            renderLiveAlerts();
            
            // Start live updates
            simulateLiveUpdate();

            // Filter tags
            document.querySelectorAll('.filter-tag').forEach(tag => {
                tag.addEventListener('click', function() {
                    this.classList.toggle('active');
                    
                    const activeTypes = [];
                    document.querySelectorAll('.filter-tag.active').forEach(t => {
                        const type = t.dataset.type;
                        if (type !== 'all') activeTypes.push(type);
                    });
                    
                    if (activeTypes.length === 0) {
                        document.querySelector('[data-type="all"]').classList.add('active');
                        renderQuickDial(['all']);
                    } else {
                        renderQuickDial(activeTypes);
                    }
                });
            });

            // Clear filters
            document.getElementById('clear-filters').addEventListener('click', () => {
                document.querySelectorAll('.filter-tag').forEach(t => t.classList.add('active'));
                renderQuickDial();
            });

            // Category tabs
            document.querySelectorAll('.category-tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    document.querySelectorAll('.category-tab').forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    
                    const category = this.dataset.category;
                    const location = document.getElementById('location-search').value.trim();
                    const state = location ? location.split(',').pop().trim() : null;
                    
                    renderContactsTable(category, state);
                });
            });

            // Search location
            document.querySelector('.search-btn').addEventListener('click', function() {
                const location = document.getElementById('location-search').value.trim();
                if (location) {
                    const state = location.split(',').pop().trim();
                    const activeCategory = document.querySelector('.category-tab.active').dataset.category;
                    renderContactsTable(activeCategory, state);
                    
                    // Show state-specific alert
                    if (emergencyDatabase.stateSpecific[state]) {
                        alert(`ðŸ“ Showing emergency contacts for ${state}`);
                    } else {
                        alert(`Showing national emergency contacts. For state-specific contacts, please enter a valid state name.`);
                    }
                }
            });

            // Use my location
            document.getElementById('use-my-location').addEventListener('click', function() {
                if (navigator.geolocation) {
                    navigator.geolocation.getCurrentPosition(
                        position => {
                            alert(`ðŸ“ Location detected! Showing contacts near you.`);
                            // In production, reverse geocode to get state
                            document.getElementById('location-search').value = "Chennai, Tamil Nadu";
                            renderContactsTable('all', 'Tamil Nadu');
                        },
                        error => {
                            alert('Please enable location access or enter your location manually.');
                        }
                    );
                }
            });

            // State filter for live alerts
            document.getElementById('state-filter').addEventListener('change', function() {
                renderLiveAlerts(this.value);
            });

            // Refresh alerts
            document.getElementById('refresh-alerts').addEventListener('click', function() {
                const stateFilter = document.getElementById('state-filter').value;
                renderLiveAlerts(stateFilter);
                this.innerHTML = '<i class="fas fa-check"></i>';
                setTimeout(() => {
                    this.innerHTML = '<i class="fas fa-rotate"></i>';
                }, 1000);
            });

            // Download buttons
            document.getElementById('download-pdf').addEventListener('click', () => {
                alert('ðŸ“„ Generating PDF with all emergency contacts...\nThis feature will download a comprehensive emergency guide.');
            });
            
            document.getElementById('download-vcf').addEventListener('click', () => {
                // Generate vCard for all emergency contacts
                let vCards = '';
                emergencyDatabase.national.forEach(contact => {
                    vCards += `BEGIN:VCARD
VERSION:3.0
FN:Emergency - ${contact.service}
TEL:${contact.number.split('/')[0].trim()}
NOTE:${contact.description || 'Emergency contact'}
END:VCARD
`;
                });
                
                const blob = new Blob([vCards], { type: 'text/vcard' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'all_emergency_contacts.vcf';
                a.click();
                
                alert('âœ… All emergency contacts saved to your phone!');
            });
            
            document.getElementById('download-image').addEventListener('click', () => {
                alert('ðŸ–¼ï¸ Generating emergency contact card...\nThis feature will create a printable wallet card.');
            });
            
            document.getElementById('send-sms').addEventListener('click', () => {
                const phone = document.getElementById('user-phone').value.trim();
                if (phone) {
                    alert(`ðŸ“± Emergency contacts sent to ${phone}\n(This is a simulation - in production, SMS would be sent)`);
                } else {
                    alert('Please enter your phone number.');
                }
            });
        });
    </script>
</body>
</html>